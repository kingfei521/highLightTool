<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/hightlight.css">
    <script type="text/javascript" src="static/js/jquery-3.6.0.min.js"></script>

</head>
<body>

    <div class="row grid-columns" id="all-div">
        <!--    é¡¶éƒ¨æŒ‰é’®-->
        <div id="col-md-11 col" class="block">
            <div id="run" class="btn btn_secondary" onclick="run()">Run Start</div>
            <div id="modify" class="btn btn_secondary" onclick="Modified()" style="display: none">Modify</div>
            <div id="disable" class="btn btn_secondary" onclick="clear_all()" style="display: none">Clear all</div>
        </div>
        <!--        å·¦è¾¹-->
        <div class="col-md-10 col" id="mydiv">
            <!--    å·¦è¾¹çš„ğŸ‘ˆçš„å¤´-->
            <div class="language">
                <label>Data Area</label>
            </div>
            <!--ä¸‹é¢çš„æ–‡æœ¬æ¡†-->
            <textarea name="message" id="data" class="input" type="text"> If the distance between us is 100 steps , I'm willing to walk 99 first , and then wait for you take that last step ,I'm willing to wait as long as it takes, because I LOVE YOU ï¼ä¸­å›½æ˜¯ä¸–ç•Œç¬¬ä¸€å¤§å›½ï¼Œæˆ‘å›½åšæŒæ”¹é©å¼€å‘ä»¥æ¥ï¼Œå¤§åŠ›å‘å±•å†œä½œç‰©ç»æµï¼Œå†œæ°‘çš„ç”Ÿæ´»æ°´å¹³æé«˜ã€‚ ä¸­å›½ä¸‡å²ï¼Œ ä¸­å›½ï¼ŒåŠ æ²¹ï¼è¥¿å®‰æ˜¯ä¸€åº§æ–‡åŒ–å¤éƒ½</textarea>
        </div>
        <!--        å³è¾¹-->
        <div class="col-md-2 col" id="mydiv2">

            <!--    å³è¾¹çš„ğŸ‘ˆçš„å¤´-->
            <div class="language">
                <label>Fields Area</label>
            </div>
            <textarea name="message" id="field" class="input">is
to
I'm
To
ä¸­å›½</textarea>
        </div>


    </div>



    <script type="text/javascript" src="static/js/HighLightTextarea.min.js"></script>
    <script type="text/javascript" src="static/js/tagsap.js"></script>
    <script type="text/javascript">
        var save_left_data = "";
        var save_right_data = "";

        //Run bt
        function run(params) {
            $("#run").hide();
            $("#disable").show();
            $("#modify").show();
            //æ˜¯å¦å­˜åœ¨å¯æ‰§è¡Œå…ƒç´ 
            if($("#field").val() == "" && $("#data").val() == ""){
                return;
            }else{
                tdg_highlight();
            }
            //ç¼©å°å·¦è¾¹çš„è¾¹æ¡†
            $(".highlightTextarea-container").width("1295")
            $(".highlightTextarea-container").height("786")
        };

        //å–æ¶ˆæ‰€æœ‰é¢œè‰²èƒŒæ™¯
        function clear_all(params) {
            var all = $("span").each(function (j, items) {
                items.style.backgroundColor = "#00000000";
            });
        }

        //åˆ¤æ–­å³è¾¹å­—æ®µæ˜¯å¦æ•°é‡ä¸æ˜¯0
        function is_zero_to_list(str, params) {
            var new_l = [];
            params.forEach(element => {
               var is_count = calc_count(str, element);
               if(is_count != 0){
                   new_l.push(element);
               } 
            });
            return new_l;
        };

        //Leftæ ‡è®°é¢œè‰²
        function Mark_simple_left(words, value=true) {
            $('textarea[id="data"]').highlightTextarea({
                words:words,
                caseSensitive:true,
                is_all_setting: value
            });
        };

        //Rightæ ‡è®°é¢œè‰²
        function Mark_simple_right(words, value=false) {
            $('textarea[id="field"]').highlightTextarea({
                words:words,
                caseSensitive:true,
                is_all_setting: value
            });
        };

        //ä¿®æ”¹æŒ‰é’®
        function Modified() {
            $("#run").show();
            $("#list").remove();
            $("#disable").hide();
            $("#modify").hide();
            if($("#mydiv").find("textarea[id='data']").length > 0){
                return;
            }else{
                $("#all-div").find("div[class='highlightTextarea']").remove();
                add_tag("mydiv", "data", save_left_data);
                add_tag("mydiv2", "field", save_right_data);
            };
        };

        //éšæœºé¢œè‰²
        function getRandomColor_count(word, count, header) {
            return {
                color:"#" + (function (color) {
                    return(color += "5678956789defdef" [Math.floor(Math.random() * 16)]) &&
                    (color.length == 6) ? color : arguments.callee(color);
                })(''), words: [word, count, header]
            };
        };

        //å»é™¤ç©ºå­—ç¬¦å’Œç©ºæ ¼
        function trimSpace(array) {
          for(var i =0; i<array.length; i++)
          {
              if(array[i] == "" || array[i] == null || typeof(array[i]) == "undefined"){
                  array.splice(i, 1);
                  i = i-1;
              }
          }  
          return array;
        };

        //æ·»åŠ htmlæ ‡ç­¾
        function add_tag(tagName, IdName, content) {
            //å…ˆä¿å­˜divä¸­åŸæ¥çš„æ ‡ç­¾
            var tag = document.getElementById(tagName).innerHTML;
            //æ„é€ æ–°çš„å†…å®¹
            var couthml = '<textarea class="input" name="message" id="' + IdName + '">' + content + '</textarea>';
            //è¿½åŠ å†…å®¹
            document.getElementById(tagName).innerHTML = tag + couthml;
        };

        //ç»Ÿè®¡æŒ‡å®šå•è¯ä¸ªæ•°
        function calc_count(testStr, armstr) {
            var reg = RegExp("(?<=[\\W||^$])" + armstr[1] + "(?=[\\W||$])", "gm");
            if(testStr.match(reg) == null){
                return 0;
            }
            return testStr.match(reg).length;
        };

        //rgbaè½¬16è¿›åˆ¶
        function hex_color(color) {
            var values = color
            .replace(/rgba?\(/, '')
            .replace(/\)/, '')
            .replace(/[\s+]/g, '')
            .split(',');
            var a = parseFloat(values[3] || 1);
            r = Math.floor(a * parseInt(values[0]) + (1 - a) * 255);
            g = Math.floor(a * parseInt(values[1]) + (1 - a) * 255);
            b = Math.floor(a * parseInt(values[2]) + (1 - a) * 255);
            return '#' +
            ("0" + r.toString(16)).slice(-2) +
            ("0" + g.toString(16)).slice(-2) +
            ("0" + b.toString(16)).slice(-2);
        };


        // åŒå‡»æ¸…é™¤æ–‡æœ¬
        $('#data').dblclick(function () {
            $("#data").val("");
        });

        $('#field').dblclick(function () {
            $("#field").val("");
        });
    </script>
</body>
</html>